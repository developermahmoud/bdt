import{createElement as e,useEffect as t,createContext as n,useState as r,useCallback as a,useRef as i,useLayoutEffect as o,useMemo as l}from"react";import{and as u}from"mendix/filters/builders";import{createPortal as s}from"react-dom";function c(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e("path",{fill:"currentColor",d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"}))}var d,f={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/d=f,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var i=typeof a;if("string"===i||"number"===i)n.push(a);else if(Array.isArray(a)){if(a.length){var o=t.apply(null,a);o&&n.push(o)}}else if("object"===i){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){n.push(a.toString());continue}for(var l in a)e.call(a,l)&&a[l]&&n.push(l)}}}return n.join(" ")}d.exports?(t.default=t,d.exports=t):window.classNames=t}();var v=f.exports;const h="com.mendix.widgets.web.filterable.filterContext";function m(){const e=window[h];if(e)return{FilterContext:e};const t=n(void 0);return window[h]=t,{FilterContext:t}}function g(e,n){const[i,o]=r(),l=a((()=>{o((t=>{const n=null==e?void 0:e.getBoundingClientRect();return a=n,(r=t)&&a&&r.height===a.height&&r.width===a.width&&r.bottom===a.bottom&&r.top===a.top&&r.left===a.left&&r.right===a.right?t:n;var r,a}))}),[e]);var u;return t((()=>u?function(e){let t;const n=()=>{t=window.requestAnimationFrame((()=>{e(),n()}))},r=()=>window.cancelAnimationFrame(t);return n(),r}(u):void 0),[u=n?l:void 0]),i}function p(t){const{setPage:n,hasMoreItems:l,isInfinite:u}=t,[s,c]=r(0),d=i(null),f=a((e=>{Math.floor(e.target.scrollHeight-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&l&&n&&n((e=>e+1))}),[l,n]),h=a((()=>{u&&l&&s<=0&&d.current&&c(d.current.clientHeight-30)}),[u,l,s]);return o((()=>{setTimeout((()=>h()),100)}),[h]),e("div",{ref:d,className:v(t.className,u?"infinite-loading":""),onScroll:u?f:void 0,role:t.role,style:u&&s>0?Object.assign(Object.assign({},t.style),{maxHeight:s}):t.style},t.children)}function w(t){let{direction:n}=t;const r="pagination-icon ".concat(n);switch(n){case"forward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),e("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),e("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),e("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return e("span",{"aria-hidden":!0},e("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),e("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return e("div",null)}}function y(t){var n,r,a,i,o,l,u;const s=void 0!==t.numberOfItems?Math.ceil(t.numberOfItems/t.pageSize):void 0,c=void 0!==s?s-1:0,d=void 0!==s,f=t.page*t.pageSize+1,v=t.canNextPage||!t.numberOfItems?(t.page+1)*t.pageSize:t.numberOfItems,h=e=>{t.setPaginationIndex&&t.setPaginationIndex(e)};if(0===t.numberOfItems)return null;const m="".concat(f," to ").concat(v," ").concat(d?"of ".concat(null!==(n=t.numberOfItems)&&void 0!==n?n:(null!=s?s:1)*t.pageSize):"");return e("div",{"aria-label":null!==(r=t.labelPagination)&&void 0!==r?r:"Pagination",className:"pagination-bar",role:"pagination"},e("button",Object.assign({className:"btn pagination-button",disabled:0===t.page},b((()=>{t.gotoPage(0),h(0)})),{"aria-label":null!==(a=t.labelFirstPage)&&void 0!==a?a:"Go to first page"}),e(w,{direction:"step-backward"})),e("button",Object.assign({className:"btn pagination-button",disabled:!t.canPreviousPage},b((()=>{t.previousPage(),h(t.page-1)})),{"aria-label":null!==(i=t.labelPreviousPage)&&void 0!==i?i:"Go to previous page"}),e(w,{direction:"backward"})),e("span",{className:"sr-only sr-only-focusable"},null!==(o=t.labelPagingStatus)&&void 0!==o?o:"Currently showing"," ",m),e("div",{"aria-hidden":!0,className:"paging-status"},m),e("button",Object.assign({"aria-label":null!==(l=t.labelNextPage)&&void 0!==l?l:"Go to next page",className:"btn pagination-button",disabled:!t.canNextPage},b((()=>{t.nextPage(),h(t.page+1)}))),e(w,{direction:"forward"})),d&&e("button",Object.assign({"aria-label":null!==(u=t.labelLastPage)&&void 0!==u?u:"Go to last page",className:"btn pagination-button",disabled:t.page===c},b((()=>{t.gotoPage(c),h(c)}))),e(w,{direction:"step-forward"})))}function b(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}function k(n){let{id:r,value:a,onChange:o}=n;const l=i(null);return t((()=>{l.current&&("all"===a||"none"===a?l.current.indeterminate=!1:"some"===a&&(l.current.indeterminate=!0))}),[a]),e("input",{id:r,type:"checkbox",className:"three-state-checkbox",ref:l,checked:"none"!==a,onChange:o})}const C=e=>{const t=e.current,[n,a]=r(!0);return o((()=>{const e=null==t?void 0:t.getBoundingClientRect(),n=!e||e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);a(n)}),[t]),n};function T(n){var o;const{setHiddenColumns:u}=n,[d,f]=r(!1),v=i(null),h=i(null),m=g(h.current,d),p=1===n.columns.length-n.hiddenColumns.length;var w,y;t((()=>{const e=e=>{if(Array.isArray(w)){if(w.some((t=>!t.current||t.current.contains(e.target))))return}else if(!w.current||w.current.contains(e.target))return;y()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[w=[h,v],y=()=>f(!1)]);const b=null!==(o=n.label)&&void 0!==o?o:"Column selector",k=C(v),T=a(((e,t)=>{e&&p||u((n=>e?[...n,t]:n.filter((e=>e!==t))))}),[u,p]),D=l((()=>n.columns.findIndex((e=>e.canHide))),[n.columns]),S=l((()=>n.columns.map((e=>e.canHide)).lastIndexOf(!0)),[n.columns]),N=s(e("ul",{ref:v,id:"".concat(n.id,"-column-selectors"),className:"column-selectors ".concat(k?"":"overflow"),"data-focusindex":0,role:"menu",style:{position:"fixed",top:null==m?void 0:m.bottom,right:void 0!==(null==m?void 0:m.right)?document.body.clientWidth-m.right:void 0}},n.columns.map(((t,r)=>{const a=!n.hiddenColumns.includes(t.id),i=a&&p;return t.canHide?e("li",{key:r,onClick:e=>{e.preventDefault(),e.stopPropagation(),T(a,t.id)},onKeyDown:e=>{var n;"Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),T(a,t.id)):("Tab"===e.key&&(r===S||e.shiftKey&&r===D)||"Escape"===e.key)&&(e.preventDefault(),f(!1),null===(n=h.current)||void 0===n||n.focus())},role:"menuitem",tabIndex:0},e("input",{checked:a,disabled:i,id:"".concat(n.id,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"},type:"checkbox",tabIndex:-1,onChange:x}),e("label",{htmlFor:"".concat(n.id,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"}},t.header)):null}))),document.body),P=a((()=>{f((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=v.current)||void 0===e?void 0:e.querySelector("li"))||void 0===t||t.focus()}),10)}),[]);return e("div",{"aria-label":b,className:"th column-selector",role:"columnheader",title:b},e("div",{className:"column-selector-content"},e("button",{"aria-label":b,ref:h,className:"btn btn-default column-selector-button",onClick:P,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),P())},"aria-haspopup":!0,"aria-expanded":d,"aria-controls":"".concat(n.id,"-column-selectors")},e(c,null))),d&&N)}function x(){}function D(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-down",className:"svg-inline--fa fa-long-arrow-alt-down fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z"}))}function S(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-up",className:"svg-inline--fa fa-long-arrow-alt-up fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z"}))}function N(){return e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt-v",className:"svg-inline--fa fa-arrows-alt-v fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))}function P(t){var n;const r=t.sortable&&t.column.canSort,i=t.draggable&&null!==(n=t.column.canDrag)&&void 0!==n&&n,o=function(e,t,n,r,i){const o=a((e=>{i(!0);const{id:t}=e.target;e.dataTransfer.setData("colDestination",t)}),[i]),l=a((e=>{e.preventDefault()}),[]),u=a((e=>{const{id:t}=e.target;t!==e.dataTransfer.getData("colDestination")&&r(t)}),[r]),s=a((()=>{i(!1),r("")}),[r,i]),c=a((e=>{s();const{id:r}=e.target,a=e.dataTransfer.getData("colDestination"),i=t.findIndex((e=>e.id===r)),o=t.findIndex((e=>e.id===a));if(i!==o){const e=[...t.map((e=>e.id))];e.splice(o,1),e.splice(i,0,a),n(e)}}),[s,n,t]);return e?{draggable:!0,onDragStart:o,onDragOver:l,onDrop:c,onDragEnter:u,onDragEnd:s}:{}}(i,t.visibleColumns,t.setColumnOrder,t.setDragOver,t.setIsDragging),[l]=t.sortBy,u=l&&l.id===t.column.id,s=u&&l.desc,c=r?e(u?s?D:S:N,null):null,d=t.column.header.trim(),f=()=>{u?u&&!s?t.setSortBy([{id:t.column.id,desc:!0}]):t.setSortBy([]):t.setSortBy([{id:t.column.id,desc:!1}])},h={onClick:f,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),f())},role:"button",tabIndex:0};return e("div",{"aria-label":d,"aria-sort":r?u?s?"descending":"ascending":"none":void 0,className:v("th",{"hidden-column-preview":t.preview&&t.hidable&&t.column.hidden}),role:"columnheader",style:t.sortable&&t.column.canSort?void 0:{cursor:"unset"},title:d},e("div",{className:v("column-container",i&&t.column.id===t.dragOver?"dragging":""),id:t.column.id,...o},e("div",{className:v("column-header",r?"clickable":"",t.className),style:{pointerEvents:t.isDragging?"none":void 0},...r?h:void 0},e("span",null,d.length>0?d:" "),c),t.filterable&&t.column.customFilter?t.column.customFilter:null),t.resizable&&t.column.canResize&&t.resizer)}const E=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()},U=e=>e&&"available"===e.status&&e.value;var I;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function O(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function M(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function H(e){M(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===A(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}!function(e){e.Number="number",e.DateTime="datetime"}(I||(I={}));var F={};function L(){return F}var B=6e4,q=36e5,R=1e3;function Y(e){M(1,arguments);var t=H(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function z(e){M(1,arguments);var t=function(e){M(1,arguments);var t=H(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=Y(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Y(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Y(n)}var V=6048e5;function j(e,t){var n,r,a,i,o,l,u,s;M(1,arguments);var c=L(),d=O(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:c.weekStartsOn)&&void 0!==r?r:null===(u=c.locale)||void 0===u||null===(s=u.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=H(e),v=f.getUTCDay(),h=(v<d?7:0)+v-d;return f.setUTCDate(f.getUTCDate()-h),f.setUTCHours(0,0,0,0),f}function _(e,t){var n,r,a,i,o,l,u,s;M(1,arguments);var c=H(e),d=c.getUTCFullYear(),f=L(),v=O(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:f.firstWeekContainsDate)&&void 0!==r?r:null===(u=f.locale)||void 0===u||null===(s=u.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(d+1,0,v),h.setUTCHours(0,0,0,0);var m=j(h,t),g=new Date(0);g.setUTCFullYear(d,0,v),g.setUTCHours(0,0,0,0);var p=j(g,t);return c.getTime()>=m.getTime()?d+1:c.getTime()>=p.getTime()?d:d-1}var Q=6048e5;function W(e,t){M(1,arguments);var n=H(e),r=j(n,t).getTime()-function(e,t){var n,r,a,i,o,l,u,s;M(1,arguments);var c=L(),d=O(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:c.firstWeekContainsDate)&&void 0!==r?r:null===(u=c.locale)||void 0===u||null===(s=u.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1),f=_(e,t),v=new Date(0);return v.setUTCFullYear(f,0,d),v.setUTCHours(0,0,0,0),j(v,t)}(n,t).getTime();return Math.round(r/Q)+1}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var a=K(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,n)}}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(e,t,n){return(t=ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(){function e(){$(this,e),re(this,"priority",void 0),re(this,"subPriority",0)}return ne(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),ie=function(e){Z(n,ae);var t=J(n);function n(e,r,a,i,o){var l;return $(this,n),(l=t.call(this)).value=e,l.validateValue=r,l.setValue=a,l.priority=i,o&&(l.subPriority=o),l}return ne(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(),oe=function(){function e(){$(this,e),re(this,"incompatibleTokens",void 0),re(this,"priority",void 0),re(this,"subPriority",void 0)}return ne(e,[{key:"run",value:function(e,t,n,r){var a=this.parse(e,t,n,r);return a?{setter:new ie(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),le=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",140),re(G(e),"incompatibleTokens",["R","u","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(),ue={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},se=/^([+-])(\d{2})(\d{2})?|Z/,ce=/^([+-])(\d{2})(\d{2})|Z/,de=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,fe=/^([+-])(\d{2}):(\d{2})|Z/,ve=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function he(e,t){return e?{value:t(e.value),rest:e.rest}:e}function me(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function ge(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,a=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(a*q+i*B+o*R),rest:t.slice(n[0].length)}}function pe(e){return me(ue.anyDigitsSigned,e)}function we(e,t){switch(e){case 1:return me(ue.singleDigit,t);case 2:return me(ue.twoDigits,t);case 3:return me(ue.threeDigits,t);case 4:return me(ue.fourDigits,t);default:return me(new RegExp("^\\d{1,"+e+"}"),t)}}function ye(e,t){switch(e){case 1:return me(ue.singleDigitSigned,t);case 2:return me(ue.twoDigitsSigned,t);case 3:return me(ue.threeDigitsSigned,t);case 4:return me(ue.fourDigitsSigned,t);default:return me(new RegExp("^-?\\d{1,"+e+"}"),t)}}function be(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ke(e,t){var n,r=t>0,a=r?t:1-t;if(a<=50)n=e||100;else{var i=a+50;n=e+100*Math.floor(i/100)-(e>=i%100?100:0)}return r?n:1-n}function Ce(e){return e%400==0||e%4==0&&e%100!=0}var Te=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",130),re(G(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return he(we(4,e),r);case"yo":return he(n.ordinalNumber(e,{unit:"year"}),r);default:return he(we(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var a=ke(n.year,r);return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(),xe=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",130),re(G(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return he(we(4,e),r);case"Yo":return he(n.ordinalNumber(e,{unit:"year"}),r);default:return he(we(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var a=_(e,r);if(n.isTwoDigitYear){var i=ke(n.year,a);return e.setUTCFullYear(i,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),j(e,r)}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),j(e,r)}}]),n}(),De=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",130),re(G(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t){return ye("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),Y(r)}}]),n}(),Se=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",130),re(G(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t){return ye("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(),Ne=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",120),re(G(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return we(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(),Pe=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",120),re(G(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return we(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(),Ee=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),re(G(e),"priority",110),e}return ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return he(me(ue.month,e),r);case"MM":return he(we(2,e),r);case"Mo":return he(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(),Ue=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",110),re(G(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return he(me(ue.month,e),r);case"LL":return he(we(2,e),r);case"Lo":return he(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}();var Ie=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",100),re(G(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return me(ue.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return j(function(e,t,n){M(2,arguments);var r=H(e),a=O(t),i=W(r,n)-a;return r.setUTCDate(r.getUTCDate()-7*i),r}(e,n,r),r)}}]),n}();function Ae(e,t){M(2,arguments);var n=H(e),r=O(t),a=function(e){M(1,arguments);var t=H(e),n=Y(t).getTime()-z(t).getTime();return Math.round(n/V)+1}(n)-r;return n.setUTCDate(n.getUTCDate()-7*a),n}var Oe=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",100),re(G(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return me(ue.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return Y(Ae(e,n))}}]),n}(),Me=[31,28,31,30,31,30,31,31,30,31,30,31],He=[31,29,31,30,31,30,31,31,30,31,30,31],Fe=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",90),re(G(e),"subPriority",1),re(G(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return me(ue.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){var n=Ce(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=He[r]:t>=1&&t<=Me[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(),Le=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",90),re(G(e),"subpriority",1),re(G(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return me(ue.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return Ce(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}();function Be(e,t,n){var r,a,i,o,l,u,s,c;M(2,arguments);var d=L(),f=O(null!==(r=null!==(a=null!==(i=null!==(o=null==n?void 0:n.weekStartsOn)&&void 0!==o?o:null==n||null===(l=n.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==i?i:d.weekStartsOn)&&void 0!==a?a:null===(s=d.locale)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=H(e),h=O(t),m=((h%7+7)%7<f?7:0)+h-v.getUTCDay();return v.setUTCDate(v.getUTCDate()+m),v}var qe=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",90),re(G(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Be(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(),Re=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",90),re(G(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n,r){var a=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return he(we(t.length,e),a);case"eo":return he(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Be(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(),Ye=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",90),re(G(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n,r){var a=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return he(we(t.length,e),a);case"co":return he(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Be(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}();var ze=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",90),re(G(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return we(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return he(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return he(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return he(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return he(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){M(2,arguments);var n=O(t);n%7==0&&(n-=7);var r=H(e),a=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+a),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(),Ve=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",80),re(G(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(be(n),0,0,0),e}}]),n}(),je=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",80),re(G(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(be(n),0,0,0),e}}]),n}(),_e=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",80),re(G(e),"incompatibleTokens",["a","b","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(be(n),0,0,0),e}}]),n}(),Qe=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",70),re(G(e),"incompatibleTokens",["H","K","k","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return me(ue.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(),We=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",70),re(G(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return me(ue.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(),Ge=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",70),re(G(e),"incompatibleTokens",["h","H","k","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return me(ue.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(),Xe=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",70),re(G(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return me(ue.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(),Ze=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",60),re(G(e),"incompatibleTokens",["t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return me(ue.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(),Ke=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",50),re(G(e),"incompatibleTokens",["t","T"]),e}return ne(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return me(ue.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return we(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(),Je=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",30),re(G(e),"incompatibleTokens",["t","T"]),e}return ne(n,[{key:"parse",value:function(e,t){return he(we(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(),$e=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",10),re(G(e),"incompatibleTokens",["t","T","x"]),e}return ne(n,[{key:"parse",value:function(e,t){switch(t){case"X":return ge(se,e);case"XX":return ge(ce,e);case"XXXX":return ge(de,e);case"XXXXX":return ge(ve,e);default:return ge(fe,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(),et=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",10),re(G(e),"incompatibleTokens",["t","T","X"]),e}return ne(n,[{key:"parse",value:function(e,t){switch(t){case"x":return ge(se,e);case"xx":return ge(ce,e);case"xxxx":return ge(de,e);case"xxxxx":return ge(ve,e);default:return ge(fe,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(),tt=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",40),re(G(e),"incompatibleTokens","*"),e}return ne(n,[{key:"parse",value:function(e){return pe(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(),nt=function(e){Z(n,oe);var t=J(n);function n(){var e;$(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return re(G(e=t.call.apply(t,[this].concat(a))),"priority",20),re(G(e),"incompatibleTokens","*"),e}return ne(n,[{key:"parse",value:function(e){return pe(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}();new le,new Te,new xe,new De,new Se,new Ne,new Pe,new Ee,new Ue,new Ie,new Oe,new Fe,new Le,new qe,new Re,new Ye,new ze,new Ve,new je,new _e,new Qe,new We,new Ge,new Xe,new Ze,new Ke,new Je,new $e,new et,new tt,new nt;const rt=new Map([[100,"FF"],[99,"FC"],[98,"FA"],[97,"F7"],[96,"F5"],[95,"F2"],[94,"F0"],[93,"ED"],[92,"EB"],[91,"E8"],[90,"E6"],[89,"E3"],[88,"E0"],[87,"DE"],[86,"DB"],[85,"D9"],[84,"D6"],[83,"D4"],[82,"D1"],[81,"CF"],[80,"CC"],[79,"C9"],[78,"C7"],[77,"C4"],[76,"C2"],[75,"BF"],[74,"BD"],[73,"BA"],[72,"B8"],[71,"B5"],[70,"B3"],[69,"B0"],[68,"AD"],[67,"AB"],[66,"A8"],[65,"A6"],[64,"A3"],[63,"A1"],[62,"9E"],[61,"9C"],[60,"99"],[59,"96"],[58,"94"],[57,"91"],[56,"8F"],[55,"8C"],[54,"8A"],[53,"87"],[52,"85"],[51,"82"],[50,"80"],[49,"7D"],[48,"7A"],[47,"78"],[46,"75"],[45,"73"],[44,"70"],[43,"6E"],[42,"6B"],[41,"69"],[40,"66"],[39,"63"],[38,"61"],[37,"5E"],[36,"5C"],[35,"59"],[34,"57"],[33,"54"],[32,"52"],[31,"4F"],[30,"4D"],[29,"4A"],[28,"47"],[27,"45"],[26,"42"],[25,"40"],[24,"3D"],[23,"3B"],[22,"38"],[21,"36"],[20,"33"],[19,"30"],[18,"2E"],[17,"2B"],[16,"29"],[15,"26"],[14,"24"],[13,"21"],[12,"1F"],[11,"1C"],[10,"1A"],[9,"17"],[8,"14"],[7,"12"],[6,"0F"],[5,"0D"],[4,"0A"],[3,"08"],[2,"05"],[1,"03"],[0,"00"]]);function at(e,t){const n=rt.get(t);if(!n)throw Error("Structure preview error: Can't convert alpha value (".concat(t,") to hex"));return"#".concat(n).concat(e.slice(1))}const it={text:{primary:"#DEDEDE",secondary:"#A4A4A4",data:"#579BF9"},background:{topbarData:at("#3A65E5",20),topbarStandard:at("#646464",20),buttonInfo:"#579BF9",container:"#313131"}};function ot(e){const n=i(e);return t((()=>{n.current=e})),a((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current&&n.current.apply(void 0,t)}),[])}Object.freeze({dark:it,light:{text:{primary:"#2F3646",secondary:"#6B707B",data:"#146FF4"},background:{topbarData:"#DCEEFE",topbarStandard:"#F7F7F7",buttonInfo:"#146FF4",container:"#FFFFFF"}}});class lt{constructor(e){this.selectionValue=e,this.type="Single"}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}add(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class ut{constructor(e,t){this.selectionValue=e,this.selectableItems=t,this.type="Multi"}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id)))}selectAll(){this.selectionValue.setSelection(this.selectableItems)}selectNone(){this.selectionValue.setSelection([])}}const st="com.mendix.widgets.web.selectable.selectionContext";function ct(e,t){return JSON.stringify(e)===JSON.stringify(t)?e:t}function dt(n){let{minWidth:o=50,setColumnWidth:l,onResizeEnds:u}=n;const[s,c]=r(!1),[d,f]=r(0),[v,h]=r(0),m=i(null),g=a((e=>{const t=e.touches?e.touches[0].screenX:e.screenX;if(f(t),c(!0),m.current){const e=m.current.parentElement;h(e.clientWidth)}}),[]),p=a((()=>{s&&(c(!1),h(0),null==u||u())}),[u,s]),w=ot(l),y=a((e=>{if(!s)return;const t=e.touches?e.touches[0].screenX:e.screenX;if(v){let e=v-(d-t);e<o&&(e=o),w(e)}}),[s,v,d,o,w]);return t((()=>(document.addEventListener("mousemove",y),document.addEventListener("mouseup",p),document.addEventListener("touchmove",y),document.addEventListener("touchend",p),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",p)})),[y,p]),e("div",{"aria-hidden":!0,ref:m,className:"column-resizer",onMouseDown:g,onTouchStart:g},e("div",{className:"column-resizer-bar"}))}function ft(n){var o;const{cellRenderer:u,className:s,columns:c,columnsDraggable:d,columnsFilterable:f,columnsHidable:h,columnsResizable:m,columnsSortable:g,data:w,emptyPlaceholderRenderer:b,filterRenderer:C,gridHeaderWidgets:x,gridHeaderTitle:D,hasMoreItems:S,headerWrapperRenderer:N,id:E,numberOfItems:U,page:I,pageSize:A,paging:O,pagingPosition:M,preview:H,rowClass:F,setPage:L,setSortParameters:B,settings:q,styles:R,selectionStatus:Y,selectionMethod:z,onSelect:V,isSelected:j}=n,_=!O,[Q,W]=r(!1),[G,X]=r(""),[Z,K]=r([]),[J,$]=r(null!==(o=c.map(((e,t)=>h&&"hidden"===e.hidable&&!H?t.toString():void 0)).filter(Boolean))&&void 0!==o?o:[]),[ee,te]=r([]),[ne,re]=r(Object.fromEntries(c.map(((e,t)=>[t.toString(),void 0])))),ae="checkbox"===z,ie="rowClick"===z,{updateSettings:oe}=function(e,n,r,o,u,s,c,d,f,v){const h=i(),m=i(!0),g=l((()=>n.map(((e,t)=>({header:e.header,id:t.toString(),hidable:e.hidable})))),[n]),p=ot(o),w=ot(s),y=ot(d),b=ot(v),k=h.current;t((()=>{if(e&&"loading"!==e.status&&e.value&&e.value!==k){const t=JSON.parse(e.value).map((e=>{var t;return{...e,columnId:(null===(t=g.find((t=>t.header===e.column)))||void 0===t?void 0:t.id)||""}})),n={columnOrder:t.sort(((e,t)=>e.order-t.order)).map((e=>e.columnId)),hiddenColumns:t.filter((e=>e.hidden)).map((e=>e.columnId)),sortBy:t.filter((e=>e.sort)).map((e=>({id:e.columnId,desc:"desc"===e.sortMethod}))),widths:Object.fromEntries(t.map((e=>[e.columnId,e.width])))};h.current=e.value,m.current=!1,p((e=>ct(e,n.columnOrder))),w((e=>ct(e,n.hiddenColumns))),y((e=>ct(e,n.sortBy))),b((e=>ct(e,n.widths))),setTimeout((()=>{m.current=!0}),100)}}),[e,g,k,p,w,y,b]);const C=a((()=>{var t;if(e&&"available"===e.status&&m.current){const n=JSON.stringify(null!==(t=function(e,t){let{columnOrder:n,hiddenColumns:r,sortBy:a,widths:i}=e;return t.map(((e,t)=>{var o;const l=n.findIndex((t=>t===e.id));return{column:e.header,sort:!!a.find((t=>t.id===e.id)),sortMethod:(null===(o=a.find((t=>t.id===e.id)))||void 0===o?void 0:o.desc)?"desc":"asc",hidden:!!r.find((t=>t===e.id)),order:l>-1?l:t,width:i[e.id]}}))}({columnOrder:r,hiddenColumns:u,sortBy:c,widths:f},g))&&void 0!==t?t:[]);h.current!==n&&e.value!==n&&(e.setValue(n),h.current=n)}}),[e,r,u,c,f,g]);return{updateSettings:C}}(q,c,Z,K,J,$,ee,te,ne,re);t((()=>oe()),[Z,J,ee,oe]),t((()=>{var e;const[t]=ee;t&&"id"in t&&"desc"in t?null==B||B({columnIndex:Number(t.id),desc:null!==(e=t.desc)&&void 0!==e&&e}):null==B||B(void 0)}),[ee,B]);const le=a((t=>e("div",{className:"filter",style:{pointerEvents:Q?"none":void 0}},t)),[Q]),ue=l((()=>c.map(((e,t)=>{var n;return{id:t.toString(),accessor:"item",alignment:e.alignment,header:e.header,hidden:"hidden"===e.hidable,canHide:"no"!==e.hidable,canDrag:e.draggable,canResize:e.resizable,canSort:e.sortable,customFilter:f?C(le,t):null,width:e.width,weight:null!==(n=e.size)&&void 0!==n?n:1}}))),[c,C,f,le]),se=l((()=>ue.filter((e=>!J.includes(e.id))).sort(((e,t)=>function(e,t,n){let r=e.findIndex((e=>e===t.id)),a=e.findIndex((e=>e===n.id));r<0&&(r=Number(t.id));a<0&&(a=Number(n.id));return r<a?-1:r>a?1:0}(Z,e,t)))),[ue,J,Z]),ce=a(((t,n,r)=>se.find((e=>e.id===t.id))||H?u(((a,i,o)=>{const l=ie?()=>V(n):o;return e("div",{key:"row_".concat(n.id,"_cell_").concat(t.id),className:v("td",{"td-borders":0===r},i,{clickable:!!l,"hidden-column-preview":H&&h&&t.hidden}),onClick:l,onKeyDown:l?e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l())}:void 0,role:l?"button":"cell",tabIndex:l?0:void 0},a)}),n,Number(t.id)):null),[u,h,H,se,V,ie]),de=l((()=>w.map((e=>({item:e})))),[w]),fe=O?e(y,{canNextPage:S,canPreviousPage:0!==I,gotoPage:e=>L&&L((()=>e)),nextPage:()=>L&&L((e=>e+1)),numberOfItems:U,page:I,pageSize:A,previousPage:()=>L&&L((e=>e-1))}):null,ve=l((()=>function(e,t,n){const r=e.map((e=>{const n=t[e.id];if(n)return"".concat(n,"px");switch(e.width){case"autoFit":return"fit-content(100%)";case"manual":return"".concat(e.weight,"fr");default:return"1fr"}})),a=[];n.selectItemColumn&&a.push("fit-content(48px)");a.push(...r),n.visibilitySelectorColumn&&a.push("fit-content(50px)");return{gridTemplateColumns:a.join(" ")}}(se,ne,{selectItemColumn:ae,visibilitySelectorColumn:h})),[ne,se,h,ae]);return e("div",{className:v(s,"widget-datagrid",{"widget-datagrid-selection-method-checkbox":ae,"widget-datagrid-selection-method-click":ie}),style:R},e("div",{className:"table",role:"table"},e("div",{className:"table-header",role:"rowgroup"},("top"===M||"both"===M)&&fe),x&&e("div",{className:"header-filters",role:"rowgroup","aria-label":D},x),e(p,{className:"table-content",hasMoreItems:S,isInfinite:_,role:"rowgroup",setPage:L,style:ve},e("div",{key:"headers_row",className:"tr",role:"row"},ae&&e("div",{key:"headers_column_select_all",className:"th widget-datagrid-col-select",role:"columnheader"},Y&&e(k,{value:Y,onChange:n.onSelectAll})),se.map((t=>N(Number(t.id),e(P,{key:"headers_column_".concat(t.id),className:"align-column-".concat(t.alignment),column:t,draggable:d,dragOver:G,filterable:f,hidable:h,isDragging:Q,preview:H,resizable:m,resizer:e(dt,{onResizeEnds:oe,setColumnWidth:e=>re((n=>(n[t.id]=e,{...n})))}),setColumnOrder:e=>K(e),setDragOver:X,setIsDragging:W,setSortBy:te,sortable:g,sortBy:ee,visibleColumns:se})))),h&&e(T,{key:"headers_column_selector",columns:ue,hiddenColumns:J,id:E,setHiddenColumns:$})),de.map(((t,n)=>e("div",{key:"row_".concat(t.item.id),className:v("tr",null==F?void 0:F(t.item),{"tr-selected":j(t.item)}),role:"row"},ae&&e("div",{key:"cell_checkbox",className:v("td widget-datagrid-col-select",{"td-borders":0===n})},e("input",{checked:j(t.item),onChange:()=>V(t.item),type:"checkbox",tabIndex:-1})),se.map((e=>ce(e,t.item,n))),h&&e("div",{key:"cell_column_dropdown","aria-hidden":!0,className:v("td column-selector",{"td-borders":0===n})})))),(0===w.length||H)&&b&&b((t=>{const n=c.length+(h?1:0)+(ae?1:0);return e("div",{key:"row-footer",className:v("td",{"td-borders":!H}),style:{gridColumn:"span ".concat(n)}},e("div",{className:"empty-placeholder"},t))}))),e("div",{className:"table-footer",role:"rowgroup"},("bottom"===M||"both"===M)&&fe)))}function vt(e,t){if(!e||!t)return[];const n=ht(t);return n?n.filter((e=>!!e.arg1&&!!e.arg2)).filter((t=>"attribute"===t.arg1.type&&t.arg1.attributeId===e.id)).map((e=>({type:e.name,value:e.arg2.value}))):[]}function ht(e){return!e||"function"!==e.type||"and"!==e.name&&"or"!==e.name?e?[e]:void 0:e.args.flatMap(ht).filter((e=>void 0!==e))}function mt(e){if(null==e)throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Did not expect an argument to be undefined");return e}function gt(e){if(e.filterAssociation)return function(e){const t=e=>"Can't map ColumnsType to AssociationProperties: ".concat(e," is undefined"),n=mt(e.filterAssociation,t("filterAssociation")),r=mt(e.filterAssociationOptions,t("filterAssociationOptions")),a=mt(e.filterAssociationOptionLabel,t("filterAssociationOptionLabel"));return{association:n,optionsSource:r,getOptionLabel:e=>{var t;return null!==(t=a.get(e).value)&&void 0!==t?t:"Error: unable to get caption"}}}(e)}function pt(e){var t;const n="string"==typeof e.attribute||!!(null===(t=e.attribute)||void 0===t?void 0:t.sortable);return e.sortable&&n}const wt={onSelect:()=>{},onSelectAll:()=>{},isSelected:()=>!1};function yt(o){var s,c,d;const f=i("DataGrid".concat(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}())),[h,g]=r(void 0),p="virtualScrolling"===o.pagination,w=p?o.datasource.limit/o.pageSize:o.datasource.offset/o.pageSize,y=i(void 0),[b,k]=r(!1),C={string:r(),number:r(),date:r(),enum:r()},{FilterContext:T}=m(),x=(void 0===window[st]&&(window[st]=n(void 0)),window[st]),D=function(t){let{onClick:n,columns:r}=t;return a(((t,a,i)=>{var o,l,u,s,c,d,f,h,m,g;const p=r[i],w=p.tooltip&&(null===(o=p.tooltip.get(a))||void 0===o?void 0:o.value);let y;return y="attribute"===p.showContentAs?e("span",{title:w,className:"td-text"},null!==(s=null===(u=null===(l=p.attribute)||void 0===l?void 0:l.get(a))||void 0===u?void 0:u.displayValue)&&void 0!==s?s:""):"dynamicText"===p.showContentAs?e("span",{title:w,className:"td-text"},null!==(f=null===(d=null===(c=p.dynamicText)||void 0===c?void 0:c.get(a))||void 0===d?void 0:d.value)&&void 0!==f?f:""):e("div",{className:"td-custom-content"},null===(h=p.content)||void 0===h?void 0:h.get(a)),t(y,v("align-column-".concat(p.alignment),null===(g=null===(m=p.columnClass)||void 0===m?void 0:m.get(a))||void 0===g?void 0:g.value,{"wrap-text":p.wrapText}),n?()=>E(null==n?void 0:n.get(a)):void 0)}),[r,n])}({columns:o.columns,onClick:o.onClick});t((()=>{o.datasource.requestTotalCount(!0),o.datasource.limit===Number.POSITIVE_INFINITY&&o.datasource.setLimit(o.pageSize)}),[o.datasource,o.pageSize]),t((()=>{!o.datasource.filter||b||y.current||(y.current=o.datasource.filter)}),[o.datasource,o.configurationAttribute,b]),t((()=>{o.refreshInterval>0&&setTimeout((()=>{o.datasource.reload()}),1e3*o.refreshInterval)}),[o.datasource,o.refreshInterval]);const S=a((e=>{const t=e(w);p?o.datasource.setLimit(t*o.pageSize):o.datasource.setOffset(t*o.pageSize)}),[o.datasource,o.pageSize,p,w]),N=o.columns.map((()=>r())),P=N.map((e=>{let[t]=e;var n;return null===(n=null==t?void 0:t.getFilterCondition)||void 0===n?void 0:n.call(t)})).filter((e=>void 0!==e)).concat(Object.keys(C).map((e=>{var t;return null===(t=C[e][0])||void 0===t?void 0:t.getFilterCondition()})).filter((e=>void 0!==e)));P.length>0?o.datasource.setFilter(P.length>1?u(...P):P[0]):b?o.datasource.setFilter(void 0):o.datasource.setFilter(y.current),h?o.datasource.setSortOrder([[o.columns[h.columnIndex].attribute.id,h.desc?"desc":"asc"]]):o.datasource.setSortOrder(void 0);const I=l((()=>function(e){return e.map((e=>{var t;return{...e,header:e.header&&U(e.header)&&null!==(t=e.header.value)&&void 0!==t?t:"",sortable:pt(e)}}))}(o.columns)),[o.columns]),A=l((()=>o.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:n}}),{})),[o.filterList]),O=l((()=>o.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:vt(n,y.current)}}),{})),[o.filterList]),M=function(e,n,r){var a,o;const l=i(!1);t((()=>{l.current&&(null==r||r.execute())}),[null==e?void 0:e.selection]),t((()=>{"loading"!==(null==n?void 0:n.status)&&(l.current=!0)}),[null==n?void 0:n.status]);const u=i(void 0);return void 0!==e&&("Single"===e.type?u.current?u.current.updateProps(e):u.current=new lt(e):u.current?u.current.updateProps(e,null!==(o=n.items)&&void 0!==o?o:[]):u.current=new ut(e,null!==(a=n.items)&&void 0!==a?a:[])),u.current}(o.itemSelection,o.datasource,o.onSelectionChange),H=function(e){return l((()=>e?{onSelect:t=>{e.isSelected(t)?e.remove(t):e.add(t)},onSelectAll:"Single"===e.type?()=>{console.warn("Datagrid: calling onSelectAll in single selection mode have no effect")}:()=>{"all"===e.selectionStatus?e.selectNone():e.selectAll()},isSelected:t=>e.isSelected(t)}:wt),[e])}(M),{selectionStatus:F,selectionMethod:L}=function(e,t){const{itemSelection:n,itemSelectionMethod:r,showSelectAllToggle:a}=e,i="string"==typeof n,o=void 0!==n&&"None"!==n,l=(i?"Multi"===n:"Multi"===(null==n?void 0:n.type))&&"checkbox"===r&&a,u=i?"none":"Multi"===(null==t?void 0:t.type)?t.selectionStatus:void 0;return{selectionStatus:l?u:void 0,selectionMethod:o?r:"none"}}(o,M),B=function(e){const t=a((()=>{"Multi"===(null==e?void 0:e.type)&&("all"===e.selectionStatus?e.selectNone():e.selectAll())}),[e]),n="Multi"===(null==e?void 0:e.type)?e.selectionStatus:void 0;return l((()=>{if(void 0!==n)return{status:n,toggle:t}}),[n,t])}(M);return e(ft,{selectionStatus:F,selectionMethod:L,cellRenderer:D,className:o.class,columns:I,columnsDraggable:o.columnsDraggable,columnsFilterable:o.columnsFilterable,columnsHidable:o.columnsHidable,columnsResizable:o.columnsResizable,columnsSortable:o.columnsSortable,data:null!==(s=o.datasource.items)&&void 0!==s?s:[],emptyPlaceholderRenderer:a((t=>"custom"===o.showEmptyPlaceholder?t(o.emptyPlaceholder):e("div",null)),[o.emptyPlaceholder,o.showEmptyPlaceholder]),filterRenderer:a(((t,n)=>{const r=o.columns[n],{attribute:a,filter:i}=r,l=gt(r),[,u]=N[n],s=vt(a,y.current);return t(a||l?e(T.Provider,{value:{filterDispatcher:e=>(k(!0),u(e),e),singleAttribute:a,singleInitialFilter:s,associationProperties:l}},i):i)}),[T,N,o.columns]),hasMoreItems:null!==(c=o.datasource.hasMoreItems)&&void 0!==c&&c,headerWrapperRenderer:a(((e,t)=>t),[]),gridHeaderWidgets:l((()=>e(T.Provider,{value:{filterDispatcher:e=>{if(e.filterType){const[,t]=C[e.filterType];t(e),k(!0)}return e},multipleAttributes:A,multipleInitialFilters:O}},e(x.Provider,{value:B},o.filtersPlaceholder))),[T,A,O,o.filtersPlaceholder,C]),gridHeaderTitle:null===(d=o.filterSectionTitle)||void 0===d?void 0:d.value,id:f.current,numberOfItems:o.datasource.totalCount,page:w,pageSize:o.pageSize,paging:"buttons"===o.pagination,pagingPosition:o.pagingPosition,rowClass:a((e=>{var t,n,r;return null!==(r=null===(n=null===(t=o.rowClass)||void 0===t?void 0:t.get(e))||void 0===n?void 0:n.value)&&void 0!==r?r:""}),[o.rowClass]),setPage:S,setSortParameters:g,settings:o.configurationAttribute,styles:o.style,valueForSort:a(((e,t)=>{const n=o.columns[t];return n.attribute?n.attribute.get(e).value:""}),[o.columns]),onSelect:H.onSelect,onSelectAll:H.onSelectAll,isSelected:H.isSelected})}export{yt as default};
